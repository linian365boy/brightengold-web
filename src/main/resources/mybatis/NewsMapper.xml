<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.brightengold.dao.NewsDao">
	<update id="updateClicks">
		update News set clicks = #{clicks} where id = #{newsId}
	</update>
	<insert id="save">
		insert into tb_news(id,title,introduce,content,priority,url,createDate,publishDate,clicks,keyWords,columnId,type,depth) 
		values(null,#{title},#{introduce},#{content},#{priority},#{url},#{createDate},#{publishDate},#{clicks},#{keyWords},#{columnId},#{type},#{depth})
	</insert>
	<delete id="delete" parameterType="int">
		delete from tb_news where id=#{newsId}
	</delete>
	<select id="findOne" parameterType="News">
		select * from tb_news where id=#{id}
	</select>
	
	<select id="findAllCount">
		select count(*) from tb_news 
	</select>
	
	<select id="findList">
		select * from tb_news where order by priority desc,id desc limit #{start},#{pageSize}
	</select>
	
	<select id="findIndexNews">
		select * from tb_news where publishDate is not null order by priority desc,createDate desc limit #{indexNewsSize}
	</select>
	
	<select id="findAllCountByColId" parameterType="long">
		select count(*) from tb_news where columnId=#{colId} and publishDate is not null
	</select>
	
	<select id="countByColId" parameterType="long">
		select count(*) from tb_news where columnId=#{colId} and publishDate is not null
	</select>
</mapper>